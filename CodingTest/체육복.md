```
import java.util.*;
class Solution {
    public int solution(int n, int[] lost, int[] reserve) {
        int[] arr = new int[n + 1];
        int count = 0;
        
        Arrays.sort(lost);
        Arrays.sort(reserve);
        
        for(int re : reserve){
            arr[re]++;
        }
        
        for(int l : lost){
            if(arr[l] == 1){
                count++;
                arr[l]--;
                continue;
            }
            
            if(l - 1 > 0 && arr[l-1] == 1){
                count++;
                arr[l-1]--;
                continue;
            }
            
            if(l + 1 <= n && arr[l+1] == 1){
                arr[l+1]--;
                count++;
            }
        }
        
        return count + n - lost.length;
    }
}
```
